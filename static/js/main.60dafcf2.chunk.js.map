{"version":3,"sources":["App.js","index.js"],"names":["redBackground","backgroundColor","os","platform","App","props","back","state","popout","activePanel","history","length","bridge","send","pop","setState","change_hash","show_native_ads","componentDidMount","bind","initializeApp","go","eruda","init","window","addEventListener","e","preventDefault","subscribe","a","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","this","hash","location","replace","panel","push","pushState","snackbar","text","icon","style","action","onActionClick","sleep","layout","onClose","before","size","ms","Promise","resolve","setTimeout","onSwipeBack","id","onClick","indicator","ANDROID","IOS","toString","header","mode","show_banner_ads","showSnackBar","fill","asideContent","transform","display","justifyContent","marginTop","then","promoBanner","bannerData","marginLeft","marginRight","ad_format","vertical","React","Component","ReactDOM","render","className","getElementById"],"mappings":"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","file":"static/js/main.60dafcf2.chunk.js","sourcesContent":["//Инструменты\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport eruda from 'eruda';\n\n//VKUI\nimport { Panel, PanelHeader, View, Cell, Avatar, Group,  Separator, Button, Header,\n\tFixedLayout, PromoBanner, Snackbar, platform, IOS, ANDROID  } from '@vkontakte/vkui';\n\n//Icons\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\nimport Icon28AdvertisingOutline from '@vkontakte/icons/dist/28/advertising_outline';\n\n//Style\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './App.css'\n\nconst redBackground = {\n\tbackgroundColor: 'var(--accent)'\n}, os = platform();\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpopout: null,\n\t\t\thistory: [\"main\"],\n\t\t\tactivePanel: \"main\",\n\n\t\t\tshow_native_ads: false,\n\t\t};\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.back = this.back.bind(this);\n\t\tthis.go = this.go.bind(this);\n\t\tthis.change_hash = this.change_hash.bind(this);\n\t\teruda.init();\n\t}\n\n\tcomponentDidMount () {\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.back(e);\n\t\t});\n\n\t\tbridge.subscribe(async ({ detail: { type, data }}) => {\n\t\t\tif(type !== undefined) console.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tthis.initializeApp();\n\t}\n\n\tinitializeApp() {\n\t\tlet hash = window.location.hash;\n\t\tif (hash) {\n\t\t\thash = hash.replace('#','');\n\t\t\tthis.go(hash);\n\t\t}else{\n\t\t\tthis.change_hash('main');\n\t\t}\n\t}\n\n\tback = () => {\n\t\tif(this.state.popout !== null){\n\t\t\tthis.setState({ popout: null });\n\t\t\treturn ;\n\t\t}\n\t\tlet { activePanel, history } = this.state;\n\t\tif(activePanel === 'main'){\n\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t}else {\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tactivePanel = history[history.length - 1];\n\t\t\t\tthis.setState({activePanel});\n\t\t\t\tthis.change_hash(activePanel);\n\t\t\t}\n\t\t}\n\t};\n\tgo(panel) {\n\t\tlet history = this.state.history;\n\t\tif(history[history.length-1] !== panel) {\n\t\t\thistory.push(panel);\n\t\t\twindow.history.pushState({activePanel: panel}, 'Title');\n\t\t\tthis.setState({activePanel: panel, history, snackbar: null});\n\t\t}\n\t\tthis.change_hash(panel);\n\t}\n\tchange_hash (panel){\n\t\tbridge.send(\"VKWebAppSetLocation\", {\"location\": panel});\n\t}\n\n\tasync showSnackBar (text, icon, style, action, onActionClick){\n\t\tthis.setState({ snackbar: null });\n\t\tawait this.sleep(10);\n\t\tif(onActionClick === null) onActionClick = ()=> {};\n\t\tthis.setState({ snackbar:\n\t\t\t\t<Snackbar\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\n\t\t\t\t\tbefore={<Avatar size={24} style={style}>{icon}</Avatar>}\n\t\t\t\t\taction={action}\n\t\t\t\t\tonActionClick={onActionClick}\n\t\t\t\t>\n\t\t\t\t\t{text}\n\t\t\t\t</Snackbar>\n\t\t});\n\t}\n\tsleep(ms) {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout} history={this.state.history} onSwipeBack={this.back}>\n\t\t\t\t<Panel id='main'>\n\t\t\t\t\t<PanelHeader>Mini App</PanelHeader>\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t<Cell before={<Icon28AdvertisingOutline/>} onClick={()=>{ this.go('advert') }}>\n\t\t\t\t\t\t\tРеклама\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t</Group>\n\t\t\t\t</Panel>\n\t\t\t\t<Panel id='advert'>\n\t\t\t\t\t<PanelHeader>Реклама</PanelHeader>\n\t\t\t\t\t<Cell indicator={os === ANDROID ? 'Android' : os === IOS ? 'IOS/Web' : os.toString()}>\n\t\t\t\t\t\tПлатформа\n\t\t\t\t\t</Cell>\n\t\t\t\t\t<Group header={<Header mode='secondary'>Просмотр рекламы</Header>}>\n\t\t\t\t\t\t<Cell onClick={()=>{ if(os === IOS) { this.setState({ show_banner_ads: !this.state.show_banner_ads }); }else{ this.showSnackBar('Работает только на IOS', <Icon16CancelCircleOutline fill={'#fff'}/>, redBackground); } }} asideContent={<Icon16Dropdown style={{ transform: `rotate(${this.state.show_banner_ads ? '180deg' : '0'})` }} />}>Баннер</Cell>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.show_banner_ads &&\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '8px' }}>\n\t\t\t\t\t\t\t\t\t<Button mode='primary' onClick={()=>{\n\t\t\t\t\t\t\t\t\t\tbridge.send('VKWebAppGetAds', {}).then(data => {\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ promoBanner: <PromoBanner onClose={() => { this.setState({promoBanner: null}); }} bannerData={data}/> });\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}>Показать</Button>\n\t\t\t\t\t\t\t\t\t<Button style={{ marginLeft: '8px', marginRight: '8px' }} mode='secondary' onClick={()=>{ this.setState({promoBanner: null}); }}>Скрыть</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Separator style={{ marginTop: '8px' }}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Cell onClick={()=>{ if(os === ANDROID){ this.setState({ show_native_ads: !this.state.show_native_ads }) }else{ this.showSnackBar('Работает только на Android', <Icon16CancelCircleOutline fill={'#fff'}/>, redBackground) } }} asideContent={<Icon16Dropdown style={{ transform: `rotate(${this.state.show_native_ads ? '180deg' : '0'})` }} />}>Полноэкранная</Cell>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.show_native_ads &&\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '8px' }}>\n\t\t\t\t\t\t\t\t\t\t<Button mode='outline' onClick={()=>{ bridge.send('VKWebAppShowNativeAds', {ad_format:'preloader'}) }}>preloader</Button>\n\t\t\t\t\t\t\t\t\t\t<Button style={{ marginLeft: '8px' }}  mode='outline' onClick={()=>{ bridge.send('VKWebAppShowNativeAds', {ad_format:'reward'}) }}>reward</Button>\n\t\t\t\t\t\t\t\t\t\t<Button style={{ marginLeft: '8px', marginRight: '8px' }}  mode='outline' onClick={()=>{ bridge.send('VKWebAppShowNativeAds', {ad_format:'interstitial'}) }}>interstitial</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<Separator style={{ marginTop: '8px' }}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Group>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.promoBanner &&\n\t\t\t\t\t\t<FixedLayout vertical=\"bottom\">\n\t\t\t\t\t\t\t{this.state.promoBanner}\n\t\t\t\t\t\t</FixedLayout>\n\t\t\t\t\t}\n\t\t\t\t\t{this.state.snackbar}\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;","//Инструменты\nimport 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport bridge from '@vkontakte/vk-bridge';\n\n//App\nimport App from './App';\n\nbridge.send('VKWebAppInit');\n\nReactDOM.render(<App className={''} />, document.getElementById('root'));\n"],"sourceRoot":""}